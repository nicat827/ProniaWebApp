
@model List<BasketItemVM>

<div id="rend-div">
    <main class="main-content">
        <div class="breadcrumb-area breadcrumb-height"
             data-bg-image="../../../assets/images/breadcrumb/bg/1-1-1919x388.jpg">
            <div class="container h-100">
                <div class="row h-100">
                    <div class="col-lg-12">
                        <div class="breadcrumb-item">
                            <h2 class="breadcrumb-heading">Basket Page</h2>
                            <ul>
                                <li>
                                    <a asp-controller="home" asp-action="index">Home</a>
                                </li>
                                <li>Cart Page</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="cart-area section-space-y-axis-100">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <form action="javascript:void(0)">
                            <div class="table-content table-responsive">
                                @if (Model.Count == 0)
                                {
                                    <h1 style="text-align:center;font-size:30px;font-weight:600;color:orangered;">Basket is empty!</h1>
                                }
                                else
                                {
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th class="product_remove">remove</th>
                                                <th class="product-thumbnail">image</th>
                                                <th class="cart-product-name">Product</th>
                                                <th class="product-price">Price</th>
                                                <th class="product-quantity">Quantity</th>
                                                <th class="product-subtotal">Subtotal</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            @foreach (BasketItemVM item in Model)
                                            {
                                                <tr>
                                                    <td class="product_remove">
                                                        <a asp-controller="basket" asp-action="remove" asp-route-id="@item.Id" asp-route-returnurl="@Context.Request.Path.Value">
                                                            <i class="pe-7s-close"
                                                               data-tippy="Remove"
                                                               data-tippy-inertia="true"
                                                               data-tippy-animation="shift-away"
                                                               data-tippy-delay="50"
                                                               data-tippy-arrow="true"
                                                               data-tippy-theme="sharpborder"></i>
                                                        </a>
                                                    </td>
                                                    <td class="product-thumbnail">
                                                        <a asp-controller="product" asp-action="details" asp-route-id="@item.Id">
                                                            <img src="~/uploads/product/@item.ImageUrl"
                                                                 alt="Cart Thumbnail" />
                                                        </a>
                                                    </td>
                                                    <td class="product-name">
                                                        <a asp-controller="product" asp-action="details" asp-route-id="@item.Id">@item.Name</a>
                                                    </td>
                                                    <td class="product-price">
                                                        <span class="amount">$@item.Price</span>
                                                    </td>
                                                    <td class="quantity">
                                                        <div class="cart-plus-minus">
                                                            <a class="change-count-btns" asp-controller="basket" asp-action="decrease" asp-route-id="@item.Id">
                                                                -
                                                            </a>
                                                            <input data-id="@item.Id" id="prod-count-id" class="cart-plus-minus-box"
                                                                   value="@item.Count"
                                                                   type="text" />
                                                            <a class="change-count-btns" asp-controller="basket" asp-action="add" asp-route-id="@item.Id" asp-route-returnUrl="@Context.Request.Path.Value">
                                                                +
                                                            </a>

                                                        </div>
                                                    </td>
                                                    <td class="product-subtotal">
                                                        <span class="amount">$@item.Subtotal</span>
                                                    </td>
                                                </tr>

                                            }



                                        </tbody>
                                    </table>

                                }
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div class="coupon-all">
                                        <div class="coupon">
                                            <input id="coupon_code"
                                                   class="input-text"
                                                   name="coupon_code"
                                                   value=""
                                                   placeholder="Coupon code"
                                                   type="text" />
                                            <input class="button mt-xxs-30"
                                                   name="apply_coupon"
                                                   value="Apply coupon"
                                                   type="submit" />
                                        </div>
                                        <div class="coupon2">
                                            <input class="button"
                                                   name="update_cart"
                                                   value="Update cart"
                                                   type="submit" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5 ml-auto">
                                    <div class="cart-page-total">
                                        <h2>Cart totals</h2>
                                        <ul>
                                            <li>Total <span>$@Model.Sum(bi => bi.Subtotal)</span></li>
                                        </ul>
                                        <a href="#">Proceed to checkout</a>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>


@section scripts {
    <script src="~/assets/js/basket.js" ></script>
}